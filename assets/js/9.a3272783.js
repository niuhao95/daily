(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{393:function(s,t,a){s.exports=a.p+"assets/img/npm_install.17be192b.png"},412:function(s,t,a){"use strict";a.r(t);var n=a(52),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"package-json"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[s._v("#")]),s._v(" "),n("code",[s._v("package.json")])]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置默认项")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init.author.email "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"niuhao95@gmail.com"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init.author.name "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"niuhao95"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init.author.url "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/niuhao95"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init.license "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MIT"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认生成方式1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init -y\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认生成方式2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-module ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(".npm-init.js\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# .npm-init.js")]),s._v("\nconst desc "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" prompt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'请输入项目描述'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'项目描述...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule.exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    key: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value'")]),s._v(",\n    name: prompt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name?'")]),s._v(", process.cwd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".split"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".pop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(",\n    version: prompt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'version?'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.0.1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n    description: desc,\n    main: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.js'")]),s._v(",\n    repository: prompt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'github repository url'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(", function"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            run"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'touch README.md'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            run"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git init'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            run"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git add README.md'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            run"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git commit -m \"first commit\"'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            run"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" origin $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            run"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git push -u origin master'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("h3",{attrs:{id:"name"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#name"}},[s._v("#")]),s._v(" "),n("code",[s._v("name")])]),s._v(" "),n("p",[n("code",[s._v("scope")]),s._v(" e.g. "),n("code",[s._v("@myorg/mypackage")])]),s._v(" "),n("h3",{attrs:{id:"version"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#version"}},[s._v("#")]),s._v(" "),n("code",[s._v("version")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://docs.npmjs.com/about-semantic-versioning",target:"_blank",rel:"noopener noreferrer"}},[n("code",[s._v("semver - semantic versioning")]),n("OutboundLink")],1),n("br"),s._v(" "),n("a",{attrs:{href:"https://semver.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[n("code",[s._v("npm semver calculator")]),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"main"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#main"}},[s._v("#")]),s._v(" "),n("code",[s._v("main")])]),s._v(" "),n("h3",{attrs:{id:"files"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#files"}},[s._v("#")]),s._v(" "),n("code",[s._v("files")])]),s._v(" "),n("h3",{attrs:{id:"scripts"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#scripts"}},[s._v("#")]),s._v(" "),n("code",[s._v("scripts")])]),s._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// npm run <stage>")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Pre & Post scripts")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"precompress"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{ executes BEFORE the `compress` script }}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"compress"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{ run command to compress files }}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"postcompress"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{ executes AFTER `compress` script }}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Life Cycle Scripts")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prepare"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prepublish"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 已弃用")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prepublishOnly"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prepack"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"postpack"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("h3",{attrs:{id:"vs-package-lock-json"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vs-package-lock-json"}},[s._v("#")]),s._v(" vs "),n("code",[s._v("package-lock.json")])]),s._v(" "),n("h4",{attrs:{id:"lockfileversion"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lockfileversion"}},[s._v("#")]),s._v(" "),n("code",[s._v("lockfileVersion")])]),s._v(" "),n("p",[s._v("todo")]),s._v(" "),n("h4",{attrs:{id:"hasinstallscript"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hasinstallscript"}},[s._v("#")]),s._v(" "),n("code",[s._v("hasInstallScript")])]),s._v(" "),n("p",[s._v("todo")]),s._v(" "),n("h2",{attrs:{id:"npm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[s._v("#")]),s._v(" "),n("code",[s._v("npm")])]),s._v(" "),n("h3",{attrs:{id:"npm-install"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-install"}},[s._v("#")]),s._v(" "),n("code",[s._v("npm install")])]),s._v(" "),n("p",[s._v("如果你的包根目录有"),n("a",{attrs:{href:"http://nodejs.cn/api/addons/building.html",target:"_blank",rel:"noopener noreferrer"}},[n("code",[s._v("binding.gyp")]),n("OutboundLink")],1),s._v("文件，并且没有定义自己的"),n("code",[s._v("install")]),s._v("或"),n("code",[s._v("preinstall")]),s._v("脚本，"),n("code",[s._v("npm")]),s._v("将通过"),n("code",[s._v("node-gyp rebuild")]),s._v("使用"),n("code",[s._v("node-gyp")]),s._v("进行编译默认的"),n("code",[s._v("install")]),s._v("命令。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pkg-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# preinstall")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# install")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# postinstall")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# prepublish 已废弃")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# preprepare")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# prepare")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# postprepare")]),s._v("\n")])])]),n("p",[n("img",{attrs:{src:a(393),alt:"执行过程"}})]),s._v(" "),n("h4",{attrs:{id:"检查config文件-npmrc"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#检查config文件-npmrc"}},[s._v("#")]),s._v(" 检查config文件"),n("code",[s._v(".npmrc")])]),s._v(" "),n("p",[s._v("项目下的 -> 用户级的 -> 全局的 -> 内置默认的")]),s._v(" "),n("h4",{attrs:{id:"构建依赖树"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构建依赖树"}},[s._v("#")]),s._v(" 构建依赖树")]),s._v(" "),n("p",[s._v("下载依赖按照扁平化原则优先下载到"),n("code",[s._v("node_modules")]),s._v("根目录，遇到相同模块就判断已存在的模块是否符合新模块的版本范围，符合跳过，不符合就添加到当前模块的"),n("code",[s._v("node_modules")]),s._v("目录")]),s._v(" "),n("h4",{attrs:{id:"缓存机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#缓存机制"}},[s._v("#")]),s._v(" 缓存机制")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("npm config get cache")]),s._v(" e.g."),n("code",[s._v(":/Users/<user>/.npm")]),s._v("（Mac OS中npm默认的缓存位置）")]),s._v(" "),n("li",[s._v("通过"),n("code",[s._v("pacote")]),s._v("把相应的包解压到"),n("code",[s._v("node_modules")]),s._v("，"),n("code",[s._v("pacote")]),s._v("通过"),n("code",[s._v("npm-registry-fetch")]),s._v("下载包，"),n("code",[s._v("npm-registry-fetch")]),s._v("通过设置"),n("code",[s._v("cache")]),s._v("属性在给定的路径下根据"),n("code",[s._v("IETF RFC 7234")]),s._v("生成缓存数据")]),s._v(" "),n("li",[n("code",[s._v("npm v5")]),s._v("之前，缓存直接存储在"),n("code",[s._v("~/.npm/cache/<name>/<version>")])]),s._v(" "),n("li",[n("code",[s._v("npm v5")]),s._v("之后，缓存放在"),n("code",[s._v(".npm/_cacache")]),s._v("文件夹中，命令 "),n("code",[s._v("npm cache clean --force")]),s._v(" 可以清除其中的文件\n"),n("ul",[n("li",[n("code",[s._v("content-v2")]),s._v(" 包含一些二进制文件，将后缀修改为"),n("code",[s._v(".tgz")]),s._v("解压后就是对于的Npm包资源")]),s._v(" "),n("li",[n("code",[s._v("index-v5")]),s._v(" 存储"),n("code",[s._v("content-v2")]),s._v("资源的索引，"),n("code",[s._v("package-lock.json")]),s._v("中的"),n("code",[s._v("integrity/version/name")]),s._v("可以生成唯一的对应这个索引的"),n("code",[s._v("Key")]),s._v("->"),n("code",[s._v("hash")]),s._v("->"),n("code",[s._v("tar包")]),s._v("->"),n("code",[s._v("pacote解压")])]),s._v(" "),n("li",[n("code",[s._v("tmp")])]),s._v(" "),n("li",[n("code",[s._v("node-sass")])])])])]),s._v(" "),n("h4",{attrs:{id:"npm-install-force-npm-install-legacy-peer-deps"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-install-force-npm-install-legacy-peer-deps"}},[s._v("#")]),s._v(" "),n("code",[s._v("npm install --force")]),s._v(" & "),n("code",[s._v("npm install --legacy-peer-deps")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://stackoverflow.com/questions/66020820/npm-when-to-use-force-and-legacy-peer-deps",target:"_blank",rel:"noopener noreferrer"}},[s._v("依赖冲突问题解决方案"),n("OutboundLink")],1),n("br"),s._v(" "),n("a",{attrs:{href:"https://docs.npmjs.com/creating-and-viewing-access-tokens",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm new token"),n("OutboundLink")],1),n("br"),s._v(" "),n("a",{attrs:{href:"https://stackoverflow.com/questions/66239691/what-does-npm-install-legacy-peer-deps-do-exactly-when-is-it-recommended-wh",target:"_blank",rel:"noopener noreferrer"}},[s._v("node-sass问题1"),n("OutboundLink")],1),n("br"),s._v(" "),n("a",{attrs:{href:"https://stackoverflow.com/questions/45251645/error-enoent-no-such-file-or-directory-scandir",target:"_blank",rel:"noopener noreferrer"}},[s._v("node-sass问题2"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("node node_modules/node-sass/scripts/install.js\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" rebuild node-sass\n")])])]),n("h3",{attrs:{id:"npm-ci"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-ci"}},[s._v("#")]),s._v(" "),n("code",[s._v("npm ci")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.npmjs.cn/cli/ci/",target:"_blank",rel:"noopener noreferrer"}},[n("code",[s._v("npm ci")]),n("OutboundLink")],1),s._v("类似于 "),n("code",[s._v("npm install")]),s._v(" ，不同之处在于它旨在用于自动化环境，例如测试平台、持续集成和部署 —— 或者您希望确保对依赖项进行全新安装的任何情况。通过跳过某些面向用户的功能，它可以比常规的 npm 安装快得多。它也比常规安装更严格，可以帮助捕获由大多数 npm 用户增量安装的本地环境引起的错误或不一致。")]),s._v(" "),n("h3",{attrs:{id:"npm-publish"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-publish"}},[s._v("#")]),s._v(" "),n("code",[s._v("npm publish")])]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version patch/minor/major\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# prepublishOnly")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# prepack")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# prepare")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# postpack")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# publish")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# postpublish")]),s._v("\n")])])]),n("h3",{attrs:{id:"nrm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nrm"}},[s._v("#")]),s._v(" "),n("code",[s._v("nrm")])]),s._v(" "),n("p",[s._v("用来管理多个 "),n("code",[s._v("npm")]),s._v(" 源，方便切换")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局安装")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -g nrm\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加自定义源")]),s._v("\nnrm "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" jd http://registry.m.jd.com\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换当前使用的Npm源")]),s._v("\nnrm use jd\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 其他命令")]),s._v("\nnrm "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nnrm current\nnrm del jd\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试延迟时间")]),s._v("\nnrm "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" jd\n")])])]),n("h2",{attrs:{id:"pnpm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pnpm"}},[s._v("#")]),s._v(" "),n("code",[s._v("pnpm")])]),s._v(" "),n("p",[s._v("软链")]),s._v(" "),n("h2",{attrs:{id:"yarn"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#yarn"}},[s._v("#")]),s._v(" "),n("code",[s._v("yarn")])]),s._v(" "),n("h2",{attrs:{id:"npm-pnpm-yarn-node-modules"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-pnpm-yarn-node-modules"}},[s._v("#")]),s._v(" "),n("code",[s._v("npm")]),s._v("/"),n("code",[s._v("pnpm")]),s._v("/"),n("code",[s._v("yarn")]),s._v(" "),n("code",[s._v("node_modules")])]),s._v(" "),n("h2",{attrs:{id:"npx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npx"}},[s._v("#")]),s._v(" "),n("code",[s._v("npx")])]),s._v(" "),n("p",[s._v("在"),n("code",[s._v("npm v5.2")]),s._v("引入，在执行模块时会优先安装依赖，运行完成后会删除。")]),s._v(" "),n("h2",{attrs:{id:"cross-env"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cross-env"}},[s._v("#")]),s._v(" "),n("code",[s._v("cross-env")])]),s._v(" "),n("p",[s._v("安装："),n("code",[s._v("npm install --save-dev cross-env")])]),s._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env NODE_ENV=development ..."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env NODE_ENV=production ..."')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);