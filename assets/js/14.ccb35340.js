(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{404:function(e,a,t){"use strict";t.r(a);var c=t(52),v=Object(c.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"浏览器缓存策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存策略"}},[e._v("#")]),e._v(" 浏览器缓存策略")]),e._v(" "),t("h3",{attrs:{id:"缓存过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#缓存过程"}},[e._v("#")]),e._v(" 缓存过程")]),e._v(" "),t("h4",{attrs:{id:"强缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#强缓存"}},[e._v("#")]),e._v(" 强缓存")]),e._v(" "),t("p",[e._v("浏览器从请求的 "),t("code",[e._v("Response Header")]),e._v(" 中找 "),t("code",[e._v("expires")]),e._v(" "),t("code",[e._v("pragma")]),e._v(" "),t("code",[e._v("cache-control")]),e._v(" 字段，如果有代表需要强缓存资源，将资源存储到 "),t("code",[e._v("Memory Cache")]),e._v(" 或 "),t("code",[e._v("Disk Cache")]),e._v(" 。一般情况下js, css, 图片等都会加上hash并进行强缓存。")]),e._v(" "),t("h5",{attrs:{id:"expires-http-date-gmt格林威治时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expires-http-date-gmt格林威治时间"}},[e._v("#")]),e._v(" Expires: "),t("code",[e._v("<http-date>")]),e._v(" (GMT格林威治时间)")]),e._v(" "),t("p",[t("code",[e._v("http1.0")]),e._v(" 响应头，如： "),t("code",[e._v("Expires: Wed, 21 Oct 2015 07:28:00 GMT")]),e._v(" 表示在这个时间之后资源过期，如果在 "),t("code",[e._v("cache-control")]),e._v(" 设置了 "),t("code",[e._v("max-age")]),e._v(" 或 "),t("code",[e._v("s-max-age")]),e._v(" 则忽略 "),t("code",[e._v("expires")]),e._v(" 。")]),e._v(" "),t("h5",{attrs:{id:"pragma-no-cache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pragma-no-cache"}},[e._v("#")]),e._v(" pragma: no-cache")]),e._v(" "),t("p",[t("code",[e._v("http1.0")]),e._v(" 响应头，表示防止客户端缓存资源，强制从服务端获取，与 "),t("code",[e._v("Cache-Control: no-cache")]),e._v(" 效果一直。")]),e._v(" "),t("h5",{attrs:{id:"cache-control-max-age-31536000"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cache-control-max-age-31536000"}},[e._v("#")]),e._v(" cache-control: max-age=31536000")]),e._v(" "),t("p",[t("code",[e._v("http1.1")]),e._v(" 响应头， 客户端和服务器的指令有区别。")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("max-age=<seconds>")]),e._v(" 值为相对于请求的时间")]),e._v(" "),t("li",[t("code",[e._v("no-cache")]),e._v(" (同max-age=0)可以缓存，但必须重新验证有效性，可以跳过http响应体的下载")]),e._v(" "),t("li",[t("code",[e._v("no-store")]),e._v(" 不缓存")]),e._v(" "),t("li",[t("code",[e._v("only-if-cached")]),e._v(" 只接受缓存，并不向服务端验证")])]),e._v(" "),t("h4",{attrs:{id:"协商缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#协商缓存"}},[e._v("#")]),e._v(" 协商缓存")]),e._v(" "),t("p",[e._v("一般html会进行协商缓存。")]),e._v(" "),t("ol",[t("li",[t("code",[e._v("last-modified & if-modified-since")])])]),e._v(" "),t("p",[e._v("last-modified: Thu, 15 Apr 2021 10:57:40 GMT"),t("br"),e._v("\n如果初次请求的响应头携带了，则下次会将值作为 "),t("code",[e._v("if-modified-since")]),e._v(" 传给服务端")]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("code",[e._v("etag & If-None-Match")]),e._v(" 优先级高于"),t("code",[e._v("last-modified")])])]),e._v(" "),t("p",[e._v('etag: "26E957E2F9E06CA9748784EECEA9AC58"\n如果初次请求的响应头携带了，下次请求作为 '),t("code",[e._v("If-None-Match")]),e._v(" 传给服务端")]),e._v(" "),t("h3",{attrs:{id:"缓存位置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#缓存位置"}},[e._v("#")]),e._v(" 缓存位置")]),e._v(" "),t("p",[e._v("一般来说图像等网页资源存储在 "),t("code",[e._v("disk cache")]),e._v(" 而操作系统缓存文件在 "),t("code",[e._v("memory cache")]),e._v(" ，实际浏览器会根据资源利用率进行自动分配")]),e._v(" "),t("h4",{attrs:{id:"service-worker-https"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#service-worker-https"}},[e._v("#")]),e._v(" Service Worker（HTTPS）")]),e._v(" "),t("p",[e._v("涉及请求拦截，可操作性强，持续缓存")]),e._v(" "),t("h4",{attrs:{id:"memory-cache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#memory-cache"}},[e._v("#")]),e._v(" Memory Cache")]),e._v(" "),t("p",[e._v("内存读取快，持续性短")]),e._v(" "),t("h4",{attrs:{id:"disk-cache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#disk-cache"}},[e._v("#")]),e._v(" Disk Cache")]),e._v(" "),t("p",[e._v("读取慢，容量大，持续性强")]),e._v(" "),t("h4",{attrs:{id:"push-cache-http2-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#push-cache-http2-0"}},[e._v("#")]),e._v(" Push Cache（HTTP2.0）")]),e._v(" "),t("h4",{attrs:{id:"prefetch-cache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prefetch-cache"}},[e._v("#")]),e._v(" prefetch cache")]),e._v(" "),t("p",[e._v("标签携带 "),t("code",[e._v("prefetch")]),e._v(" 属性时，会在浏览器空闲时进行加载")])])}),[],!1,null,null,null);a.default=v.exports}}]);