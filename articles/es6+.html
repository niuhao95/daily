<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ECMAScript | 随手记录</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="https://avatars.githubusercontent.com/u/95835868">
    <meta name="description" content="">
    
    <link rel="preload" href="/daily/assets/css/0.styles.6d983bc1.css" as="style"><link rel="preload" href="/daily/assets/js/app.c16fd53d.js" as="script"><link rel="preload" href="/daily/assets/js/2.2db6b8d5.js" as="script"><link rel="preload" href="/daily/assets/js/16.03d3317c.js" as="script"><link rel="prefetch" href="/daily/assets/js/10.b9b94c4e.js"><link rel="prefetch" href="/daily/assets/js/11.99526e62.js"><link rel="prefetch" href="/daily/assets/js/12.14fcee26.js"><link rel="prefetch" href="/daily/assets/js/13.9bdbe403.js"><link rel="prefetch" href="/daily/assets/js/14.eb7ea65c.js"><link rel="prefetch" href="/daily/assets/js/15.880d6597.js"><link rel="prefetch" href="/daily/assets/js/17.b547da87.js"><link rel="prefetch" href="/daily/assets/js/18.1070437e.js"><link rel="prefetch" href="/daily/assets/js/19.901d4dbd.js"><link rel="prefetch" href="/daily/assets/js/20.54a65dc2.js"><link rel="prefetch" href="/daily/assets/js/21.06d228b2.js"><link rel="prefetch" href="/daily/assets/js/22.f33bdee5.js"><link rel="prefetch" href="/daily/assets/js/23.b285e4af.js"><link rel="prefetch" href="/daily/assets/js/24.3a2b4c54.js"><link rel="prefetch" href="/daily/assets/js/25.bf601e6b.js"><link rel="prefetch" href="/daily/assets/js/26.bb90da8c.js"><link rel="prefetch" href="/daily/assets/js/27.0650bfbc.js"><link rel="prefetch" href="/daily/assets/js/28.3199db3c.js"><link rel="prefetch" href="/daily/assets/js/29.ead6e188.js"><link rel="prefetch" href="/daily/assets/js/3.7b99d7a9.js"><link rel="prefetch" href="/daily/assets/js/30.66c786ac.js"><link rel="prefetch" href="/daily/assets/js/31.020fc643.js"><link rel="prefetch" href="/daily/assets/js/32.48a2d1f6.js"><link rel="prefetch" href="/daily/assets/js/33.9fff296a.js"><link rel="prefetch" href="/daily/assets/js/34.cec417a1.js"><link rel="prefetch" href="/daily/assets/js/35.388e1c60.js"><link rel="prefetch" href="/daily/assets/js/36.a058ad1d.js"><link rel="prefetch" href="/daily/assets/js/37.d300765b.js"><link rel="prefetch" href="/daily/assets/js/4.1ce77b7c.js"><link rel="prefetch" href="/daily/assets/js/5.fa20c5d9.js"><link rel="prefetch" href="/daily/assets/js/6.cb97eca8.js"><link rel="prefetch" href="/daily/assets/js/7.3cdd557b.js"><link rel="prefetch" href="/daily/assets/js/8.a8af5943.js"><link rel="prefetch" href="/daily/assets/js/9.2d92ee3e.js">
    <link rel="stylesheet" href="/daily/assets/css/0.styles.6d983bc1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/daily/" class="home-link router-link-active"><!----> <span class="site-name">随手记录</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/ts/" class="nav-link">
  TypeScript4
</a></li><li class="dropdown-item"><!----> <a href="/daily/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/daily/another/Regex.html" class="nav-link">
  RegEx
</a></li><li class="dropdown-item"><!----> <a href="/daily/articles/func.html" class="nav-link">
  Blog
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="手写" class="dropdown-title"><span class="title">手写</span> <span class="arrow down"></span></button> <button type="button" aria-label="手写" class="mobile-dropdown-title"><span class="title">手写</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/handwriting/Components/Toast.html" class="nav-link">
  组件实现
</a></li><li class="dropdown-item"><!----> <a href="/daily/handwriting/AppQ/1.html" class="nav-link">
  编程应用
</a></li><li class="dropdown-item"><!----> <a href="/daily/handwriting/leetcode/4.html" class="nav-link">
  算法
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/niuhao95" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/ts/" class="nav-link">
  TypeScript4
</a></li><li class="dropdown-item"><!----> <a href="/daily/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/daily/another/Regex.html" class="nav-link">
  RegEx
</a></li><li class="dropdown-item"><!----> <a href="/daily/articles/func.html" class="nav-link">
  Blog
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="手写" class="dropdown-title"><span class="title">手写</span> <span class="arrow down"></span></button> <button type="button" aria-label="手写" class="mobile-dropdown-title"><span class="title">手写</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/handwriting/Components/Toast.html" class="nav-link">
  组件实现
</a></li><li class="dropdown-item"><!----> <a href="/daily/handwriting/AppQ/1.html" class="nav-link">
  编程应用
</a></li><li class="dropdown-item"><!----> <a href="/daily/handwriting/leetcode/4.html" class="nav-link">
  算法
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/niuhao95" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Q&amp;A</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/daily/articles/eventloop.html" class="sidebar-link">事件循环</a></li><li><a href="/daily/articles/cssSpecifity.html" class="sidebar-link">CSS Specifishity</a></li><li><a href="/daily/articles/statusCodes.html" class="sidebar-link">HTTP 响应码</a></li><li><a href="/daily/articles/func.html" class="sidebar-link">函数表达式/函数声明</a></li><li><a href="/daily/articles/es6+.html" aria-current="page" class="active sidebar-link">ES6+</a></li><li><a href="/daily/articles/iterator.html" class="sidebar-link">可迭代/迭代器协议</a></li><li><a href="/daily/articles/Promise.html" class="sidebar-link">Promise</a></li><li><a href="/daily/articles/npmscripts.html" class="sidebar-link">package.json</a></li><li><a href="/daily/articles/http.html" class="sidebar-link">HTTP</a></li><li><a href="/daily/articles/broswercache.html" class="sidebar-link">浏览器缓存策略</a></li><li><a href="/daily/articles/flex.html" class="sidebar-link">flex/grid</a></li><li><a href="/daily/articles/loading.html" class="sidebar-link">更好的loading</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>记录</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="ecmascript"><a href="#ecmascript" class="header-anchor">#</a> ECMAScript</h2> <h3 id="es6"><a href="#es6" class="header-anchor">#</a> ES6</h3> <p><a href="https://wangdoc.com/es6/" target="_blank" rel="noopener noreferrer">ECMAScript 6 教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="es7"><a href="#es7" class="header-anchor">#</a> ES7</h3> <table><thead><tr><th>特性</th> <th>说明</th></tr></thead> <tbody><tr><td><code>Array.prototype.includes</code></td> <td></td></tr> <tr><td>Exponentiation operator</td> <td>指数函数的中缀表示法</td></tr></tbody></table> <h4 id="array-prototype-includes"><a href="#array-prototype-includes" class="header-anchor">#</a> <code>Array.prototype.includes</code></h4> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//第二个参数3表示数组下标为3的项，也即第4项开始查找</span>
  console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;不存在!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不存在！</span>
<span class="token punctuation">}</span>

<span class="token comment">//下面两句说明incluedes和indexOf的区别</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
</code></pre></div></details> <h4 id="指数函数的中缀表示法"><a href="#指数函数的中缀表示法" class="header-anchor">#</a> 指数函数的中缀表示法</h4> <p>与 <code>Math.pow</code> 相关，语法类似 <code>i++</code> , <code>x += x</code> ，用 <code>**</code> 表示</p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> cubed <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">**</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//等同于: 2 * 2 * 2</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
b <span class="token operator">**=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//等同于: b = b * b * b;</span>
</code></pre></div></details> <h3 id="es8"><a href="#es8" class="header-anchor">#</a> ES8</h3> <table><thead><tr><th>特性</th> <th>说明</th></tr></thead> <tbody><tr><td><code>Object.values</code>/<code>Object.entries</code></td> <td></td></tr> <tr><td>String padding</td> <td>字符串追加</td></tr> <tr><td><code>Object.getOwnPropertyDescriptors</code></td> <td></td></tr> <tr><td>Trailing commas in function parameter lists and calls</td> <td>结尾允许逗号</td></tr> <tr><td>Async functions</td> <td>异步函数</td></tr></tbody></table> <h4 id="object-values-object-entries"><a href="#object-values-object-entries" class="header-anchor">#</a> <code>Object.values</code>/<code>Object.entries</code></h4> <p><em>注意: 当把数字当做对象的键的时候，返回的数组以键的值升序排序</em></p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['xxx', 1]</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">10</span><span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'yyy'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token string">'zzz'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['yyy', 'zzz', 'xxx']</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'e'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// === { 0: 'e', 1: 's', 2: '8' };</span>
Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['e', 's', '8']</span>
Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token string">'es8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['e', 's', '8']</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [['x', 'xxx'], ['y', 1]]</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">10</span><span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'yyy'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token string">'zzz'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [['1', 'yyy'], ['3', 'zzz'], ['10', 'xxx']]</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'e'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [['0', 'e'], ['1', 's'], ['2', '8']]</span>
Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token string">'es8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [['0', 'e'], ['1', 's'], ['2', '8']]</span>
</code></pre></div></details> <h4 id="string-padstart-targetlength-padstring-string-padend-targetlength-padstring"><a href="#string-padstart-targetlength-padstring-string-padend-targetlength-padstring" class="header-anchor">#</a> <code>String.padStart(targetLength,[padString])</code>/<code>String.padEnd(targetLength,padString])</code></h4> <p><em>targetLength</em>：当前字符串需要填充到的目标长度。如果这个数值小于当前字符串的长度，则返回当前字符串本身。<br> <em>padString</em>：(可选)填充字符串。如果字符串太长，使填充后的字符串长度超过了目标长度，则只保留最左侧的部分，其他部分会被截断，此参数的缺省值为空格。</p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'es8'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 'es8'</span>
<span class="token string">'es8'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// '  es8'</span>
<span class="token string">'es8'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'1891'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// '189es8'</span>
<span class="token string">'es8'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">'coffe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'coffecoffeces8'</span>
<span class="token string">'es8'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// '0000es8'</span>

<span class="token string">'es8'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 'es8'</span>
<span class="token string">'es8'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 'es8  '</span>
<span class="token string">'es8'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'1891'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 'es8189'</span>
<span class="token string">'es8'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">'coffe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 'es8coffecoffec'</span>
<span class="token string">'es8'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 'es89999'</span>
</code></pre></div></details> <h4 id="object-getownpropertydescriptors-obj"><a href="#object-getownpropertydescriptors-obj" class="header-anchor">#</a> <code>Object.getOwnPropertyDescriptors(obj)</code></h4> <p>返回<code>obj</code>自身定义的属性内容，而不是从<code>object</code>的原型继承而来的。这个方法返回的值可能是 <code>configurable</code>、<code>enumerable</code>、<code>writable</code>、<code>get</code>、<code>set</code> 和 <code>value</code>。</p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> 
  <span class="token keyword">get</span> <span class="token function">es7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token function">es8</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {</span>
<span class="token comment">//   es7: {</span>
<span class="token comment">//     configurable: true,</span>
<span class="token comment">//     enumerable: true,</span>
<span class="token comment">//     get: function es7(){}, //the getter function</span>
<span class="token comment">//     set: undefined</span>
<span class="token comment">//   },</span>
<span class="token comment">//   es8: {</span>
<span class="token comment">//     configurable: true,</span>
<span class="token comment">//     enumerable: true,</span>
<span class="token comment">//     get: function es8(){}, //the getter function</span>
<span class="token comment">//     set: undefined</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>
</code></pre></div></details> <h3 id="es9"><a href="#es9" class="header-anchor">#</a> ES9</h3> <table><thead><tr><th>特性</th> <th>说明</th></tr></thead> <tbody><tr><td><code>for await...of</code></td> <td>异步迭代器</td></tr> <tr><td><code>Promise.prototype.finally</code></td> <td></td></tr> <tr><td>Lifting template literal restriction</td> <td>重新修订了字面量的转义</td></tr> <tr><td>Rest/Spread Properties</td> <td>Rest/Spread 属性</td></tr> <tr><td><a href="/another/Regex">dotAll/命名捕获组/反向断言/Unicode转义</a></td> <td>正则表达式</td></tr></tbody></table> <h4 id="for-await-of"><a href="#for-await-of" class="header-anchor">#</a> <code>for await...of</code></h4> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">streamAsyncIterator</span><span class="token punctuation">(</span><span class="token parameter">stream</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reader <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> done<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">yield</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    reader<span class="token punctuation">.</span><span class="token function">releaseLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 从url获取数据并使用异步 generator 来计算响应值的大小</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getResponseSize</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Will hold the size of the response, in bytes.</span>
  <span class="token keyword">let</span> responseSize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// 使用for-await-of循环. 异步 generator 会遍历响应值的每一部分</span>
  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunk <span class="token keyword">of</span> <span class="token function">streamAsyncIterator</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Incrementing the total response length.</span>
    responseSize <span class="token operator">+=</span> chunk<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Response Size: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>responseSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> bytes</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// expected output: &quot;Response Size: 1071472&quot;</span>
  <span class="token keyword">return</span> responseSize<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">getResponseSize</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.typicode.com/photos'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></details> <h4 id="重新修订了字面量的转义-string-raw"><a href="#重新修订了字面量的转义-string-raw" class="header-anchor">#</a> 重新修订了字面量的转义 <code>String.raw()</code></h4> <p><code>ES9</code> 之前，<code>\u</code>表示 unicode 转义，<code>\x</code>表示十六进制转义，<code>\</code>后跟一个数字表示八进制转义，这使得创建特定的字符串变得不可能，例如Windows文件路径<code>C:\uuu\xxx\111</code>。</p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\u{54}</span><span class="token template-punctuation string">`</span></span> <span class="token comment">//会转义成unicode &quot;T&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&gt;&gt; T</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> String<span class="token punctuation">.</span>raw<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\u{54}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">//不会被转义</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&gt;&gt; \u{54}</span>
</code></pre></div></details> <h4 id="rest-spread"><a href="#rest-spread" class="header-anchor">#</a> Rest/Spread</h4> <p><code>...</code>在ES6中已经引入，但是ES6中的作用对象仅限于数组。在ES9中，为对象提供了像数组一样的rest参数和扩展运算符：</p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> <span class="token operator">...</span>param <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span> <span class="token comment">//这里...是rest</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; {b: 2, c: 3}</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> a<span class="token punctuation">,</span> <span class="token operator">...</span>param <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//这里...还是rest</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; 1</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; {b: 2, c: 3}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> param <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">...</span>param <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//此处...为spread</span>
</code></pre></div></details> <h3 id="es10"><a href="#es10" class="header-anchor">#</a> ES10</h3> <table><thead><tr><th>特性</th> <th>说明</th></tr></thead> <tbody><tr><td>Optional <code>catch</code> binding</td> <td>可选的 catch 变量绑定</td></tr> <tr><td><code>Symbol.prototype.description</code></td> <td>Symbol 对象的 description 属性</td></tr> <tr><td><code>Function.prototype.toString</code> revision</td> <td>修订<code>Function.prototype.toString</code></td></tr> <tr><td><code>Object.fromEntries</code></td> <td></td></tr> <tr><td><code>trimStart</code>/<code>trimEnd</code></td> <td><code>String.prototype.{trimStart,trimEnd}</code></td></tr> <tr><td><code>flat</code>/<code>flatMap</code></td> <td><code>Array.prototype.{flat,flatMap}</code></td></tr></tbody></table> <h4 id="可选的-catch-变量绑定"><a href="#可选的-catch-变量绑定" class="header-anchor">#</a> 可选的 catch 变量绑定</h4> <p>在 ES10 之前，我们必须通过语法为 catch 子句绑定异常变量，无论是否有必要。很多时候 catch 块是多余的，而 ES10 使我们能够简单的把变量省略掉。</p> <h4 id="symbol-对象的-description-属性"><a href="#symbol-对象的-description-属性" class="header-anchor">#</a> Symbol 对象的 description 属性</h4> <p>ES10 中为 Symbol 对象添加了只读属性 <code>description</code> ，返回包含 Symbol 描述的字符串。</p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//添加的描述内容为“foo”</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sym<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&gt;&gt; foo</span>

sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sym<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&gt;&gt; undefined</span>

<span class="token comment">//和 Symbol() 不同的是，用 Symbol.for() 方法创建的的 symbol 会被放入一个全局 </span>
<span class="token comment">//symbol 注册表中。Symbol.for() 并不是每次都会创建一个新的 symbol，它会首先检</span>
<span class="token comment">//查给定的 key 是否已经在注册表中了。假如是，则会直接返回上次存储的那个。否则，它</span>
<span class="token comment">//会再新建一个。</span>
sym <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sym<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&gt;&gt; bar</span>
</code></pre></div></details> <h4 id="修订function-prototype-tostring"><a href="#修订function-prototype-tostring" class="header-anchor">#</a> 修订Function.prototype.toString</h4> <p>函数原型上的方法toString()现在返回精确字符，包括空格和注释。</p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token comment">/* comment */</span> foo <span class="token comment">/* another comment */</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">//ES10之前不会打印注释部分</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; function foo(){}</span>

<span class="token comment">//ES10里，会把注释一同打印</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; function /* comment */ foo /* another comment */ (){}</span>

<span class="token comment">//注意：</span>
<span class="token comment">//箭头函数是个例外</span>
<span class="token keyword">const</span> bar <span class="token comment">/* comment */</span> <span class="token operator">=</span> <span class="token comment">/* another comment */</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; () =&gt; {}</span>
</code></pre></div></details> <h4 id="object-fromentries"><a href="#object-fromentries" class="header-anchor">#</a> Object.fromEntries</h4> <p><code>Object.fromEntries()</code> 执行与 <code>Object.entries()</code> 互逆的操作。</p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Map 转化为 Object</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'baz'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { foo: &quot;bar&quot;, baz: 42 }</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Array 转化为 Object</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token string">'0'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { 0: &quot;a&quot;, 1: &quot;b&quot;, 2: &quot;c&quot; }</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 对象转换</span>
<span class="token keyword">const</span> object1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> object2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>
  Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>object1<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span> key<span class="token punctuation">,</span> val <span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span> key<span class="token punctuation">,</span> val <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { a: 2, b: 4, c: 6 }</span>
</code></pre></div></details> <h4 id="string-prototype-trimstart-trimend"><a href="#string-prototype-trimstart-trimend" class="header-anchor">#</a> String.prototype.{trimStart,trimEnd}</h4> <p>分别去除字符串首、尾的空白字符</p> <h4 id="array-prototype-flat-flatmap"><a href="#array-prototype-flat-flatmap" class="header-anchor">#</a> Array.prototype.{flat,flatMap}</h4> <ul><li><code>Array.prototype.flat</code> 数组的所有项会以指定的维度降维（扁平化）<details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;9&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4维数组，默认降维1，变成3维数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; [ '1', '8', [ '9', ['1'] ] ]</span>

r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;9&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//4维数组，降维2，变成2维数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; [ '1', '8', '9', ['1'] ]</span>

r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;9&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4维数组，最多变成1维数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; [ '1', '8', '9', '1' ]</span>
</code></pre></div></details></li> <li><code>Array.prototype.flatMap</code> 先会执行一次<code>map()</code>方法，然后再通过类似<code>flat()</code>方法扁平化数组<details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;I love&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;coffe 1891&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; [ [ 'I', 'love' ], [ 'coffe', '1891' ] ]</span>

r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;I love&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;coffe 1891&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt;[ 'I', 'love', 'coffe', '1891' ]</span>
</code></pre></div></details></li></ul> <h3 id="es11"><a href="#es11" class="header-anchor">#</a> ES11</h3> <table><thead><tr><th>特性</th> <th>说明</th></tr></thead> <tbody><tr><td>Optional Chaining <code>?.</code></td> <td>可选链操作符</td></tr> <tr><td>Nullish coalescing Operator <code>??</code></td> <td>空值合并操作符</td></tr> <tr><td><code>String.prototype.matchAll</code></td> <td></td></tr> <tr><td><code>import()</code></td> <td></td></tr> <tr><td><code>Promise.allSettled</code></td> <td></td></tr> <tr><td>Bigint</td> <td></td></tr> <tr><td>globalThis</td> <td></td></tr></tbody></table> <h4 id="import"><a href="#import" class="header-anchor">#</a> import()</h4> <p><code>import()</code>和<code>import</code>的区别</p> <ul><li>import() 可以用在script脚本区，不止是模块内。</li> <li>如果在模块内使用import()，它可以在任何地方任何级别执行，而不是被提升到顶级（优先执行）。</li> <li>import() 是运行时执行，也即什么时候运行到这句，就会加载参数指定的模块；参数也可以是动态可变的，不止是静态参数。</li> <li>import() 不建立可静态分析的依赖关系（静态分析的情况下可以做很多优化），但是，在一些比较简单的情况下，比如import（“/foo.js”）中，实现仍然可以执行静态分析优化。</li></ul> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./module.js'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//直接通过default属性获得模块暴露的接口</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></details> <h4 id="promise-allsettled"><a href="#promise-allsettled" class="header-anchor">#</a> Promise.allSettled</h4> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;coffe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;1891&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token parameter">arr</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; [ { status: &quot;fulfilled&quot;, value: &quot;coffe&quot;},</span>
                      <span class="token comment">//&gt;&gt;   { status: &quot;rejected&quot;, reason: &quot;1891&quot; } ]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></details> <h4 id="bigint"><a href="#bigint" class="header-anchor">#</a> Bigint</h4> <p>Number 类型超出这个范围的整数计算或者表示会丢失精度</p> <ul><li><code>Number.MIN_SAFE_INTEGER</code>: <code>-(2^53-1)</code></li> <li><code>Number.MAX_SAFE_INTEGER</code>: <code>(2^53-1)</code></li></ul> <p><em>它是JavaScript的第7个原始类型，不能将 BigInt与Number混合使用。比较Number和 BigInt是可以的，但是不能把它们相加。</em></p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">;</span>  <span class="token comment">// &gt;&gt; 9007199254740991</span>
num <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// &gt;&gt; 9007199254740992</span>
<span class="token comment">// 再次加 +1 后无法正常运算</span>
num <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// &gt;&gt; 9007199254740992</span>
<span class="token comment">// 两个不同的值，却返回了true</span>
<span class="token number">9007199254740992</span> <span class="token operator">===</span> <span class="token number">9007199254740993</span>  <span class="token comment">// &gt;&gt; true</span>

<span class="token comment">// bigInt</span>
<span class="token keyword">const</span> aNumber <span class="token operator">=</span> <span class="token number">1891</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> aBigInt <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span>aNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
aBigInt <span class="token operator">===</span> <span class="token number">1891n</span> <span class="token comment">// true</span>
<span class="token keyword">typeof</span> aBigInt <span class="token operator">===</span> <span class="token string">'bigint'</span> <span class="token comment">// true</span>
<span class="token keyword">typeof</span> <span class="token number">1891</span> <span class="token comment">// &quot;number&quot;</span>
<span class="token keyword">typeof</span> <span class="token number">1891n</span> <span class="token comment">// &quot;bigint&quot;</span>

<span class="token number">1234567890123456789n</span> <span class="token operator">*</span> <span class="token number">123n</span><span class="token punctuation">;</span> <span class="token comment">// -&gt; 151851850485185185047n</span>

<span class="token number">1n</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token comment">// true</span>
<span class="token number">1n</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token comment">// Uncaught TypeError: Cannot mix BigInt and other types, use explicit conversions</span>
</code></pre></div></details> <h4 id="globalthis"><a href="#globalthis" class="header-anchor">#</a> globalThis</h4> <p>兼容 <code>浏览器</code>/<code>Node.js</code>/<code>Web Workers</code></p> <details class="custom-block details"><summary>e.g.</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES10之前的解决方案</span>
<span class="token keyword">const</span> <span class="token function-variable function">getGlobal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> self
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> window
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> global <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> global
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'unable to locate global object'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ES10内置</span>
globalThis<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// [0,1,2]</span>

<span class="token comment">// 定义一个全局对象v = { value:true } ,ES10用如下方式定义</span>
globalThis<span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span>

<span class="token comment">// worker</span>
globalThis <span class="token operator">===</span> self
<span class="token comment">// node</span>
globalThis <span class="token operator">===</span> global
<span class="token comment">// browser</span>
globalThis <span class="token operator">===</span> window
</code></pre></div></details> <h3 id="es12"><a href="#es12" class="header-anchor">#</a> ES12</h3> <table><thead><tr><th>特性</th> <th>说明</th></tr></thead> <tbody><tr><td><code>String.prototype.replaceAll</code></td> <td></td></tr> <tr><td><code>Promise.any</code></td> <td></td></tr> <tr><td>WeakRefs</td> <td></td></tr> <tr><td>Numeric separators <code>_</code></td> <td>数字分隔符</td></tr> <tr><td>Logical assignment operator</td> <td>逻辑赋值运算符</td></tr> <tr><td>Private getters and setters</td> <td></td></tr> <tr><td>Private class methods</td> <td></td></tr> <tr><td><code>/d</code></td> <td>RegEx Flag</td></tr> <tr><td>Top-level <code>await</code></td> <td><a href="https://github.com/tc39/proposal-top-level-await/" target="_blank" rel="noopener noreferrer">tc39/proposal-top-level-await<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr></tbody></table> <h4 id="logical-assignment-operator"><a href="#logical-assignment-operator" class="header-anchor">#</a> Logical assignment operator</h4> <ol><li><code>(??=) -&gt; (x ??= y)</code></li> <li><code>(&amp;&amp;=) -&gt; (x &amp;&amp;=y)</code></li> <li><code>(||?) -&gt; (x ||=y)</code></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/daily/articles/func.html" class="prev">
        函数表达式/函数声明
      </a></span> <span class="next"><a href="/daily/articles/iterator.html">
        可迭代/迭代器协议
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/daily/assets/js/app.c16fd53d.js" defer></script><script src="/daily/assets/js/2.2db6b8d5.js" defer></script><script src="/daily/assets/js/16.03d3317c.js" defer></script>
  </body>
</html>
